#!/bin/sh
set -e

help() {
    printf "\nUsage: ${0} [OPTIONS]

Options:
--country,-c    Set the country to where fetch mirrors from
--sortby,-s     Sort mirrors by age, rate, speed, etc
--help,-h       Displays this message\n\n"
}

[ $# -eq 0 ] && help && exit 0

while [ $# -gt 0 ]; do
    case "${1}" in
        --country|-c)
            shift
            country="${1}"
        ;;

        --sortby|-s)
            shift
            sortby="${1}"
	    ;;

        --help|-h)
            help
        ;;

        *)
            help
        ;;
    esac
    shift
done

[ -z $country ] && return 1
[ -z $sortby ] && return 1
echo ":: Updating mirrors from ${country} and sorting them by ${sortby}, please wait..." && \
    reflector --country ${country} --sort ${sortby} --save /etc/pacman.d/mirrorlist || return 1

